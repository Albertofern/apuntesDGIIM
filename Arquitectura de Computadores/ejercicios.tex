%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
% 
% Ejercicios resueltos de Análisis Matemático II.
% Doble Grado de Informática y Matemáticas.
% Universidad de Granada.
% Curso 2016/17.
% 
% 
% Colaboradores:
% Javier Sáez (@fjsaezm)
% Daniel Pozo (@danipozodg)
% Pedro Bonilla (@pedrobn23)
% Guillermo Galindo (@guillegalor)
% Antonio Coín (@antcc)
% Sofía Almeida (@SofiaAlmeida)
% Miguel Lentisco (@AlfaOmegaX)
% Luis Ortega (@Ludvins)
% 
% Agradecimientos:
% Andrés Herrera (@andreshp) y Mario Román (@M42) por
% las plantillas base.
% 
% Sitio original:
% https://github.com/libreim/apuntesDGIIM/
% 
% Licencia:
% CC BY-NC-SA 4.0 (https://creativecommons.org/licenses/by-nc-sa/4.0/)
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 


% ------------------------------------------------------------------------------
% ACKNOWLEDGMENTS
% ------------------------------------------------------------------------------

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
% Plantilla básica de Latex en Español.
% 
% Autor: Andrés Herrera Poyatos (https://github.com/andreshp) 
% 
% Es una plantilla básica para redactar documentos. Utiliza el paquete fancyhdr
% para darle un estilo moderno pero serio.
% 
% La plantilla se encuentra adaptada al español.
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
% Plantilla de Trabajo
% Modificación de una plantilla de Latex de Frits Wenneker para adaptarla 
% al castellano y a las necesidades de escribir informática y matemáticas.
% 
% Editada por: Mario Román
% 
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
% Short Sectioned Assignment
% LaTeX Template
% Version 1.0 (5/5/12)
% 
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
% 
% Original author:
% Frits Wenneker (http://www.howtotex.com)
% 
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 


% Tipo de documento y opciones.
% \documentclass[11pt, a4paper, twoside]{article} % Usar para imprimir
\documentclass[11pt, a4paper]{article}


% ---------------------------------------------------------------------------
% PAQUETES
% ---------------------------------------------------------------------------

% Idioma y codificación para Español.
\usepackage[utf8]{inputenc}
\usepackage[spanish, es-tabla, es-lcroman, es-noquoting]{babel}
\selectlanguage{spanish} 
% \usepackage[T1]{fontenc}

% Fuente utilizada.
\usepackage{courier}    % Fuente Courier.
\usepackage{microtype}  % Mejora la letra final de cara al lector.

% Diseño de página.
\usepackage{fancyhdr}   % Utilizado para hacer cabeceras y pies de página.
\usepackage{titlesec} 	% Utilizado para hacer títulos propios.
\usepackage{lastpage}   % Referencia a la última página.
\usepackage{extramarks} % Marcas extras. Utilizado en pie de página y cabecera.
\usepackage[parfill]{parskip}    % Crea una nueva línea entre párrafos.
\usepackage{geometry}            % Geometría de las páginas.

% Símbolos y matemáticas.
\usepackage{amssymb, amsmath, amsthm, amsfonts, amscd}
\usepackage{upgreek}

\usepackage{mdframed}
\usepackage{xcolor}


% Otros.
\usepackage{enumitem}   % Listas mejoradas.
\usepackage[hidelinks]{hyperref}
\usepackage{graphicx}   % Gráficos.
\usepackage{caption}

%%% LISTINGS

\usepackage{listingsutf8}

%% Las tildes

\lstset{
  inputencoding=utf8/latin1
}

% Dibujos Tikz
\usepackage{pgf,tikz}
\usepackage{mathrsfs}
\usetikzlibrary{arrows,calc,intersections,through,backgrounds}
\usepackage{tkz-graph}

% Fuentes personalizadas

\usepackage[scaled=.85]{newpxtext,newpxmath}
\usepackage[scaled=.85]{FiraSans} 
\usepackage[T1]{fontenc}
\usepackage[scaled=.85]{FiraMono} 

% Código para ajustar las fuentes matemáticas al estilo del texto
% que le rodea

\DeclareMathVersion{sans}
\SetSymbolFont{operators}{sans}{OT1}{cmbr}{m}{n}
\SetSymbolFont{letters}{sans}{OML}{cmbr}{m}{it}
\SetSymbolFont{symbols}{sans}{OMS}{cmbrs}{m}{n}
\SetMathAlphabet{\mathit}{sans}{OT1}{cmbr}{m}{sl}
\SetMathAlphabet{\mathbf}{sans}{OT1}{cmbr}{bx}{n}
\SetMathAlphabet{\mathtt}{sans}{OT1}{cmtl}{m}{n}
\SetSymbolFont{largesymbols}{sans}{OMX}{iwona}{m}{n}

\DeclareMathVersion{boldsans}
\SetSymbolFont{operators}{boldsans}{OT1}{cmbr}{b}{n}
\SetSymbolFont{letters}{boldsans}{OML}{cmbrm}{b}{it}
\SetSymbolFont{symbols}{boldsans}{OMS}{cmbrs}{b}{n}
\SetMathAlphabet{\mathit}{boldsans}{OT1}{cmbr}{b}{sl}
\SetMathAlphabet{\mathbf}{boldsans}{OT1}{cmbr}{bx}{n}
\SetMathAlphabet{\mathtt}{boldsans}{OT1}{cmtl}{b}{n}
\SetSymbolFont{largesymbols}{boldsans}{OMX}{iwona}{bx}{n}

\newif\IfInSansMode
\let\oldsf\sffamily
\renewcommand*{\sffamily}{\oldsf\mathversion{sans}\InSansModetrue}
\let\oldmd\mdseries
\renewcommand*{\mdseries}{\oldmd\IfInSansMode\mathversion{sans}\fi\relax}
\let\oldbf\bfseries
\renewcommand*{\bfseries}{\oldbf\IfInSansMode\mathversion{boldsans}\else%
  \mathversion{bold}\fi\relax}
\let\oldnorm\normalfont
\renewcommand*{\normalfont}{\oldnorm\InSansModefalse\mathversion{normal}}
\let\oldrm\rmfamily
\renewcommand*{\rmfamily}{\oldrm\InSansModefalse\mathversion{normal}}

% Colores

\definecolor{50}{HTML}{E8F5E9}
\definecolor{300}{HTML}{81C784}
\definecolor{500}{HTML}{4CAF50}
\definecolor{700}{HTML}{388E3C}

% ---------------------------------------------------------------------------
% OPCIONES PERSONALIZADAS
% ---------------------------------------------------------------------------

% Redefinir letra griega épsilon.
\let\epsilon\upvarepsilon

% Formato de texto.
\linespread{1.3}            % Espaciado entre líneas.
\setlength\parindent{0pt}   % No indentar el texto por defecto.
\setlist{leftmargin=.5in}   % Indentación para las listas.

% Estilo de página.
\pagestyle{fancy}
\fancyhf{}
\geometry{left=3cm,right=3cm,top=3cm,bottom=3cm}   % Márgenes y cabecera.

% Estilo de las cabeceras

\titleformat{\section}
{\Large\bfseries\sffamily}{\thesection}{1em}{}
\titleformat{\subsection}
{\large\sffamily}{\thesubsection}{1em}{}

% Estilo de enlaces
\hypersetup{
  % hidelinks = true,   % Oculta todos los enlaces.
  colorlinks = true,   % Muestra todos los enlaces, sin bordes alrededor.
  linkcolor=black,     % Color de enlaces genéricos
  citecolor={blue!50!black},   % Color de enlaces de referencias
  urlcolor={blue!80!black}     % Color de enlaces de URL
}

% Ruta donde buscar gráficos
\graphicspath{{../Recursos/Plantillas/}, {Recursos/Plantillas/}}

% Redefinir entorno de demostración (reducir espacio superior)
% \makeatletter
% \renewenvironment{proof}[1][\proofname] {\vspace{-15pt}\par\pushQED{\qed}\normalfont\topsep6\p@\@plus6\p@\relax\trivlist\item[\hskip\labelsep\it#1\@addpunct{.}]\ignorespaces}{\popQED\endtrivlist\@endpefalse}
% \makeatother

% Aumentar el tamaño del interlineado
\linespread{1.3}

% Permitir salto de página en ecuaciones
\allowdisplaybreaks

% ---------------------------------------------------------------------------
% COMANDOS PERSONALIZADOS
% ---------------------------------------------------------------------------

% Redefinir letra griega épsilon.
\let\epsilon\upvarepsilon

% Valor absoluto: \abs{}
\providecommand{\abs}[1]{\lvert#1\rvert}    

% Fracción grande: \ddfrac{}{}
\newcommand\ddfrac[2]{\frac{\displaystyle #1}{\displaystyle #2}}

% Texto en negrita en modo matemática: \bm{}
\newcommand{\bm}[1]{\boldsymbol{#1}}

% Línea horizontal.
\newcommand{\horrule}[1]{\rule{\linewidth}{#1}}

% Letras de conjuntos
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}

% Sucesiones
\newcommand{\xn}{\{x_n\}}
\newcommand{\fn}{\{f_n\}}

% Letra griega "chi" en línea con el texto
\DeclareRobustCommand{\rchi}{{\Large \mathpalette\irchi\relax}}
\newcommand{\irchi}[2]{\raisebox{0.4\depth}{$#1\chi$}} % inner command, used by \rchi 

% Letra 'omega'
\newcommand{\W}{\Omega}
\newcommand{\w}{\omega}


% ---------------------------------------------------------------------------
% CABECERA Y PIE DE PÁGINA
% ---------------------------------------------------------------------------

\renewcommand{\sectionmark}[1]{%
  \markboth{#1}{}}

\renewcommand{\subsectionmark}[1]{%
  \markright{#1}{}}

% \addtolength{\headheight}{4ex}
\renewcommand{\headrulewidth}{0pt}

\addtolength{\headwidth}{\marginparsep}
% \addtolength{\headwidth}{\marginparwidth}

\fancypagestyle{section}{%
  \fancyhead{}
  % \addtolength{\headheight}{-10ex}
  % \renewcommand{\headheight}{0pt}%
  % \setlength{\footskip}{-48pt}%
  \fancyfoot[LE,RO]{\Large\sffamily\thepage}
  \renewcommand{\headrulewidth}{0pt}%
  \renewcommand{\footrulewidth}{0pt}%
}

\let\originalsection\section
\RenewDocumentCommand{\section}{som}{%
  \IfBooleanTF{#1}
  {\originalsection*{#3}}
  {\IfNoValueTF{#2}
    {\originalsection{#3}}
    {\originalsection[#2]{#3}}%
  }%
  \thispagestyle{section}%
}

\fancyhead[LE,RO]{\rule[-4ex]{0pt}{2ex}\sffamily\textsl{\rightmark}}
\fancyhead[LO,RE]{\sffamily{\leftmark}}
\fancyfoot[LE,RO]{\Large\sffamily\thepage}

% ---------------------------------------------------------------------------
% ENTORNOS PARA MATEMÁTICAS
% ---------------------------------------------------------------------------

% Nuevo estilo para definiciones.
\newtheoremstyle{definition-style} % Nombre del estilo.
{}               % Espacio por encima.
{}               % Espacio por debajo.
{}                   % Fuente del cuerpo.
{}                   % Identación.
{\bf\sffamily}                % Fuente para la cabecera.
{.}                  % Puntuación tras la cabecera.
{.5em}               % Espacio tras la cabecera.
{\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}     % Especificación de la cabecera (actual: nombre en negrita).

% Nuevo estilo para notas.
\newtheoremstyle{remark-style} 
{10pt}                
{10pt}                
{}                   
{}                   
{\itshape \sffamily}          
{.}                  
{.5em}               
{}                  

% Nuevo estilo para teoremas y proposiciones.
\newtheoremstyle{theorem-style}
{}                
{}                
{}           
{}                  
{\bfseries \sffamily}             
{.}                
{.5em}           
{\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}


% Configuración general de mdframe, los estilos de los teoremas, etc
\mdfsetup{skipabove=12pt,skipbelow=12pt,innertopmargin=12pt,innerbottommargin=4pt}

% Creamos los 'marcos' de los estilos

\mdfdefinestyle{nth-frame}{
  linewidth=2pt, %
  linecolor= 500, % 
  % linecolor=black,
  topline=false, %
  bottomline=false, %
  rightline=false,%
  leftmargin=0pt, %
  innerleftmargin=1em, % 
  rightmargin=0pt, %
  innerrightmargin=0pt, % % 
  % splittopskip=\topskip, %
  % splitbottomskip=\topskip, %
}% 

\mdfdefinestyle{nprop-frame}{
  linewidth=2pt, %
  linecolor= 300, %
  % linecolor= gray, 
  topline=false, %
  bottomline=false, %
  rightline=false,%
  leftmargin=0pt, %
  innerleftmargin=1em, %
  innerrightmargin=0em, 
  rightmargin=0pt, %
  % splittopskip=\topskip, %
  % splitbottomskip=\topskip, %
}%       

\mdfdefinestyle{ndef-frame}{
  linewidth=2pt, %
  linecolor= 300, % 
  % linecolor= gray!50,
  backgroundcolor= 50,
  % backgroundcolor= gray!5,
  topline=false, %
  bottomline=false, %
  rightline=false,%
  leftmargin=0pt, %
  innerleftmargin=1em, %
  innerrightmargin=1em, 
  rightmargin=0pt, % 
  innertopmargin=1.5em,%
  innerbottommargin=1em, % 
  splittopskip=\topskip, %
  % splitbottomskip=\topskip, %
}%               

% Asignamos los marcos a los estilos

\surroundwithmdframed[style=nth-frame]{nth}
\surroundwithmdframed[style=nprop-frame]{nprop}
\surroundwithmdframed[style=nprop-frame]{ncor}
\surroundwithmdframed[style=ndef-frame]{ndef}
\surroundwithmdframed[style=ndef-frame]{ejer}

% Nuevo estilo para ejemplos.
\newtheoremstyle{example-style}
{10pt}                
{10pt}                
{}                  
{}                   
{\bf \sffamily}              
{:}                 
{.5em}               
{}                   

% Teoremas, proposiciones y corolarios.
\theoremstyle{theorem-style}
\newtheorem{nth}{Teorema}[section]
\newtheorem{nprop}{Proposición}[section]
\newtheorem{ncor}{Corolario}[section]
\newtheorem{lema}{Lema}[section]
% Definiciones.
\theoremstyle{definition-style}
\newtheorem{ndef}{Definición}[section]
\newtheorem{ejer}{Ejercicio}[section]

% Notas.
\theoremstyle{remark-style}
\newtheorem*{nota}{Nota}
\newtheorem*{sol}{Solución}


% Ejemplos.
\theoremstyle{example-style}
\newtheorem{ejemplo}{Ejemplo}[section]

% Listas ordenadas con números romanos (i), (ii), etc.
\newenvironment{nlist}
{\begin{enumerate}
    \renewcommand\labelenumi{(\emph{\roman{enumi})}}}
  {\end{enumerate}}

% División por casos con llave a la derecha.
\newenvironment{rcases}
{\left.\begin{aligned}}
    {\end{aligned}\right\rbrace}



%%%%%%

%% Colores de Solarized

\definecolor{sbase03}{HTML}{002B36}
\definecolor{sbase02}{HTML}{073642}
\definecolor{sbase01}{HTML}{586E75}
\definecolor{sbase00}{HTML}{657B83}
\definecolor{sbase0}{HTML}{839496}
\definecolor{sbase1}{HTML}{93A1A1}
\definecolor{sbase2}{HTML}{EEE8D5}
\definecolor{sbase3}{HTML}{FDF6E3}
\definecolor{syellow}{HTML}{B58900}
\definecolor{sorange}{HTML}{CB4B16}
\definecolor{sred}{HTML}{DC322F}
\definecolor{smagenta}{HTML}{D33682}
\definecolor{sviolet}{HTML}{6C71C4}
\definecolor{sblue}{HTML}{268BD2}
\definecolor{scyan}{HTML}{2AA198}
\definecolor{sgreen}{HTML}{859900}

%% Colores de Solarized para listings

\lstset{
  % How/what to match
  % sensitive=true,
  % language=pseudo,
  % Border (above and below)
  frame=leftline,
  rulecolor=\color{300},
  framerule=2pt,
  % Line number
  numbers=left,
  % Extra margin on line (align with paragraph)
  xleftmargin=\parindent,
  % Put extra space under caption
  belowcaptionskip=1\baselineskip,
  % Colors
  % backgroundcolor=\color{sbase3},
  basicstyle=\footnotesize\ttfamily\color{sbase00},
  keywordstyle=\color{scyan},
  commentstyle=\color{sbase1},
  stringstyle=\color{sblue},
  numberstyle=\color{sbase01},
  %identifierstyle=\color{500},
  % Break long lines into multiple lines?
  breaklines=true,
  % Show a character for spaces?
  showstringspaces=false,
  tabsize=2
}


% ---------------------------------------------------------------------------
% PÁGINA DE TÍTULO
% ---------------------------------------------------------------------------

% Título del documento.
\newcommand{\subject}{Arquitectura de Computadores: Ejercicios resueltos}

% Autor del documento.
\newcommand{\docauthor}{Doble Grado en Ingeniería Informática y Matemáticas}

% Título
\title{
  \normalfont \normalsize 
  \textsc{Universidad de Granada} \\ [25pt]    % Texto por encima.
  \horrule{0.5pt} \\[0.4cm] % Línea horizontal fina.
  \huge Análisis Matemático II\\ \Large{Ejercicios resueltos}\\ % Título.
  \horrule{2pt} \\[0.5cm] % Línea horizontal gruesa.
}

% Autor.
\author{\Large\sffamily{\docauthor}}

% Fecha.
\date{\vspace{-1.5em} \normalsize \sffamily Curso 2016/17}



% ---------------------------------------------------------------------------
% COMIENZO DEL DOCUMENTO
% ---------------------------------------------------------------------------

\begin{document}

\maketitle  % Título.
\vfill
\newpage
\tableofcontents    % Índice
\newpage

\section{}

\section{}

\section{Arquitecturas con paralelismo a nivel de thread (TLP)}


\begin{ejer}
  Suponemos que se va a ejecutar en paralelo el siguiente código (inicialmente x
  e y son $0$):

   \begin{tabular}{ll}
     P1 & P2 \\
    \texttt{x=1;}& \texttt{y=1;} \\
     \texttt{x=2;} &\texttt{y=2;} \\
    \texttt{print y;} & \texttt{print x;}
  \end{tabular}

  Qué resulados se pueden imprimir si (considere que el compilador no altera el
  código):

  \begin{enumerate}
  \item Se ejecutan P1 y P2 en un multiprocesador con consistencia secuencial.
  \item Se ejecutan en un multiprocesador basado en un bus que garantiza todos
    los órdenes excepto el orden $W \rightarrow R$. Esto es debido a que los
    procesadores tienen buffer de escritura, permitiendo el procesador que las
    lecturas en el código que se ejecuta adelanten a las escrituras que tiene su
    buffer. Obsérvese que hay varios resultados posibles.
  \end{enumerate}
\end{ejer}

\begin{sol}
    Sabemos que \texttt{x = y = 0}

  \begin{tabular}{lll}
     & P1 & P2 \\
    (1) (W) & \texttt{x=1;}&\texttt{y=1;} (w) (a) \\
    (2) (W) &\texttt{x=2;} &\texttt{y=2;} (w) (b) \\
    (3) (R) &\texttt{print y;} & \texttt{print x;} (R) (C)
  \end{tabular}

  \texttt{
  \begin{tabular}{llll}
    y=0&x=2&y=2&x=0 \\
    y=1&x=2&y=2&x=1\\
    y=2&x=2&y=2&x=2
  \end{tabular}}
\end{sol}




\end{document}
